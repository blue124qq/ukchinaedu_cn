!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ReferralCookieHandler=t():e.ReferralCookieHandler=t()}(self,(function(){return e={808:(e,t,r)=>{var n,o,i;void 0===(o="function"==typeof(n=i=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var c in i)i[c]&&(u+="; "+c,!0!==i[c]&&(u+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+u}}function a(e,r){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var u=i[a].split("="),c=u.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var s=t(u[0]);if(c=(n.read||n)(c,s)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(o[s]=c,e===s)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,r){i(t,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}((function(){}))})?n.call(t,r,t,e):n)||(e.exports=o),e.exports=i()},500:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[];const r=e.indexOf(t);return-1===r?[]:[e.slice(0,r),e.slice(r+t.length)]}},14:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendTrackingPixel=void 0,t.appendTrackingPixel=function(e){var t=document.createElement("img");t.src="https://www.berush.com/statistics/hit/"+e+"/",t.dataset.test="berush-hit",t.style.display="none",document.body.appendChild(t)}},321:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getQuerySearchParams=void 0;var i=o(r(500));t.getQuerySearchParams=function(e){return e?e.substring(1).split("&").reduce((function(e,t){var r,o=i.default(t,"="),a=o[0],u=o[1];return u?n(n({},e),((r={})[a]=u,r)):e}),{}):{}}},13:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleRefCookie=void 0;var o=n(r(808)),i=r(321);t.handleRefCookie=function(e,t,r){var n=i.getQuerySearchParams(window.location.search);if(void 0===o.default.get(t)){var a=window.location.hostname.match(/[\w-]+/g),u=a&&"."+a[a.length-2]+"."+a[a.length-1];if(u){if('""'===r)return void o.default.withConverter({write:function(e){return unescape(e)}}).set(t,n[e]||r,{expires:3650,path:"/",domain:u});o.default.set(t,n[e]||r,{expires:3650,path:"/",domain:u})}}}},607:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(808)),i=r(321),a=r(161),u=r(246),c=r(14),s=r(13),f=r(729);t.default=function(){s.handleRefCookie("ref","ref_code","__default__"),s.handleRefCookie("refer_source","refer_source",'""');var e=o.default.get("ref_code");e&&"__default__"!==e&&f.isContainsOnlyLatinCharsAndNums(e)&&c.appendTrackingPixel(e),setTimeout((function(){var e=i.getQuerySearchParams(window.location.search),t=["ref","refer_source"];if(Object.keys(e).find((function(e){return t.includes(e)}))){var r=a.removeSearchParams(e,t),n=""+window.location.pathname+u.toQueryString(r)+window.location.hash;window.history.replaceState(null,"",n)}}),500)}},729:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isContainsOnlyLatinCharsAndNums=void 0,t.isContainsOnlyLatinCharsAndNums=function(e){return Boolean(e&&!/[^A-Za-z0-9]/g.test(e))}},161:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeSearchParams=void 0,t.removeSearchParams=function(e,t){return Object.keys(e).reduce((function(r,n){return t.includes(n)||(r[n]=e[n]),r}),{})}},246:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryString=void 0,t.toQueryString=function(e){return Object.keys(e).length?"?"+Object.keys(e).reduce((function(t,r){return t.concat("&"+r+"="+e[r])}),"").slice(1):""}}},t={},function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(607);var e,t}));